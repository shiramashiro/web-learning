<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>03.折叠面板</title>
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
</head>
<body>
  <style>
    #app {
      width: 500px;
    }

    .collapse {
      margin: 10px 0;
      border-radius: 5px;
      border: 1px solid #AAAAAA;
      padding: 10px;
    }

    .collapse > .header {
      padding: 5px 0;
      cursor: pointer;
      user-select: none;
      display: flex;
      justify-content: space-between;
    }

    .collapse > .header > .content {
      width: 95%;
    }

    .collapse > .header > .ctrl-icon {
      width: 3%;
    }

    .collapse > .header > .ctrl-icon svg {
      transition-duration: 0.35s;
    }

    .collapse > .body {
      display: none;
    }

    .collapse > .unfold-collapse {
      display: block !important;
      margin-top: 5px;
      border-top: 1px solid #CCCCCC;
      padding-top: 10px;
      padding-bottom: 10px;
    }

    .collapse > .fold-collapse {
      display: none !important;
    }
  </style>
  <div id="app">
    <div class="collapse">
      <div class="header">
        <!-- header wrapper-->
        <div class="content">fold or unfold the collapse component.</div>
        <div class="ctrl-icon">
          <svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"
               width="12" height="12">
            <path d="M676.1 512L232.3 116.1l57.9-51.7L791.7 512 290.2 959.6l-57.9-51.7L676.1 512z"
                  fill="#2c2c2c"></path>
          </svg>
        </div>
      </div>
      <div class="body" data-is-fold="false">
        <!-- content wrapper -->
        <div class="content">hello typescript!</div>
      </div>
    </div>
    <div class="collapse">
      <div class="header">
        <!-- header wrapper-->
        <div class="content">fold or unfold the collapse component.</div>
        <div class="ctrl-icon">
          <svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"
               width="12" height="12">
            <path d="M676.1 512L232.3 116.1l57.9-51.7L791.7 512 290.2 959.6l-57.9-51.7L676.1 512z"
                  fill="#2c2c2c"></path>
          </svg>
        </div>
      </div>
      <div class="body" data-is-fold="false">
        <!-- content wrapper -->
        <div class="content">hello javascript!</div>
      </div>
    </div>
  </div>
  <script>
    function strToBool(str) {
      return str !== "false";
    }

    function boolToStr(bool) {
      return bool === false ? "false" : "true";
    }

    $(".collapse > .header").on("click", function () {
      let $collapseBody = $(this).parent().find(".body");
      let $collapseIcon = $(this).children(".ctrl-icon").find("svg");
      let collapseIsFold = strToBool($collapseBody[0].dataset.isFold);
      if ( !collapseIsFold ) {
        $collapseBody.removeClass("fold-collapse");
        $collapseBody.addClass("unfold-collapse");
        $collapseIcon.css({ "transform": `rotate(90deg) scaleX(1)` });
      } else {
        $collapseBody.removeClass("unfold-collapse");
        $collapseBody.addClass("fold-collapse");
        $collapseIcon.css({ "transform": `rotate(0deg) scaleX(1)` });
      }
      $collapseBody[0].dataset.isFold = boolToStr(!collapseIsFold);
    });
  </script>
</body>
</html>